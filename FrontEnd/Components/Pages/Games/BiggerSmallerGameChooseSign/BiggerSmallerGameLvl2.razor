@page "/BiggerSmaller/ChooseSign/{type}"
@using DTO.DTOs
@using Microsoft.AspNetCore.Components.Authorization
@using global::FrontEnd.Components.Pages.Games.BiggerSmallerGameChooseSign
@rendermode InteractiveServer
@inherits BiggerSmallerGameLvl2Base;
@inject NavigationManager NavManager

<PageTitle>Większe Mniejsze</PageTitle>

@if(ready==true)
{
    <h1 style="text-align:center">Wybierz Poprawny Znak </h1>
    <p style="height:10px"></p>

    if(type=="fraction"){    
        
        <h2><b> 
            <div class="frac"> 
                <span>@excerciseNumber1</span>  
                <span class="symbol">/</span>
                <span class="bottom"> @excerciseNumberDen1 </span>
            </div>

            <label style="padding-left:30px"></label> 
            
            <div class="frac"> 
                <span>@excerciseNumber2</span>  
                <span class="symbol">/</span>
                <span class="bottom"> @excerciseNumberDen2 </span>
            </div>
        </b></h2>
    }else
    {
        <h2><b> @excerciseNumber1 <label style="padding-left:30px"></label> @excerciseNumber2</b></h2>
    }


    <p style="height:5px"></p>
    Random rnd = new Random();
    int correct = rnd.Next(0,wrongAnwser.Count+1);
    int j = 0;
    for (int i=0;i<wrongAnwser.Count+1;i++)
    {
        if (i == correct)
        {
             <button class="gamebtns" @onclick="GoodNumber">@anwser</button>  <label style="padding-left:15px"></label>
        }else
        {
             <button class="gamebtns" @onclick="@gameBase.WrongAnswer">@wrongAnwser[j]</button> <label style="padding-left:15px"></label>
             j++;
        }
    }

    <p style="height:5px"></p>
    <p role="status">@gameBase.message</p>
    <p style="height:5px"></p>
    <p>Wynik: @gameBase.good / @gameBase.all </p>
}else
{
        <h2 style="text-align:center"><b>Koniec Gry!</b></h2>
        <p style="height:10px"></p>
        <h4>Twój wynik to: @gameBase.good / @gameBase.all </h4>

      
}


  <p style="height:50px"></p>
  <button class="backbtn" @onclick="GoBack">Cofnij</button>

@code {
    [CascadingParameter]
    private Task<AuthenticationState> authenticationStateTask { get; set; }

    private async Task GoodNumber()
    {
        await gameBase.GoodAnswer();
        if(gameBase.all>=10)
        {
            ready = false;
            await Task.Delay(1500);
            await gameBase.UpdateUserScore(authenticationStateTask,userProgressService);
            return;
        }
        PrepareNewGame();
    }

    private async Task GoBack()
    {
        await gameBase.UpdateUserScore(authenticationStateTask,userProgressService);
        switch (type)
        {
            case "natural":
                NavManager.NavigateTo("ChooseGame/uname/Liczby Naturalne");

                break;
            case "minus":
                NavManager.NavigateTo("ChooseGame/uname/Liczby Całkowite");

                break;
            default:
                NavManager.NavigateTo("ChooseGame/uname/Podstawy Liczb");
                break;
        }
    }
}
